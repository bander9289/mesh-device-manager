{"id":"phone-manager-app-0jg","title":"Split DeviceManager responsibilities","description":"## Goal\nBreak up `DeviceManager` into smaller units with clearer responsibilities (keep UI behavior the same).\n\n## Why it matters\n`DeviceManager` is currently a large god-object mixing:\n- scanning + permission orchestration\n- proxy connection management\n- mesh group membership discovery\n- UI state and timers\n- device model caching + normalization\n\nThis makes changes risky and contributes to duplicated logic.\n\n## Suggested decomposition (incremental)\n1) **ScanningService**\n   - BLE scan start/stop, dedupe, timeouts\n2) **MeshTransportService**\n   - proxy connection, filter config, send group/unicast\n3) **GroupMembershipService**\n   - membership discovery + persistence\n4) **DeviceStateStore**\n   - canonical device list + MAC normalization + updates\n\n`DeviceManager` can remain the Provider-facing facade initially, delegating to these services.\n\n## Guardrails\n- No behavioral changes during the first extraction pass.\n- Keep async/Stream lifecycles explicit and testable.\n- Avoid cyclic dependencies between services.\n\n## Implementation Notes (2025-12-22)\n- Extracted BLE scan responsibilities into `BleScanningService` (new file: `lib/managers/services/ble_scanning_service.dart`).\n- Extracted group address allocation + group list utilities into `GroupStore` (new file: `lib/managers/services/group_store.dart`).\n- `DeviceManager` remains the Provider-facing facade and delegates scanning/group-list logic to these services; public methods/signatures remain the same.\n\n## Verification\n- `flutter test` passes.\n- Manual smoke remains: scan shows devices; group dropdown still defaults to Default (0xC000); triggers still work.\n","acceptance_criteria":"DeviceManager responsibilities split; public UI behavior unchanged; tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:34.203069956-07:00","updated_at":"2025-12-21T21:02:41.158197674-07:00","closed_at":"2025-12-21T21:02:41.158197674-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-415","title":"Align Dart/native callback events","description":"## Goal\nAlign Dart-side expected callbacks with what Android actually emits, per the written contract (`phone-manager-app-njl`).\n\n## Current mismatch\nDart (`PlatformMeshClient` in `lib/managers/real_mesh_client.dart`) listens for:\n- `onDeviceStatus` (✅ emitted by Android)\n- `onMeshPduCreated` (❌ not emitted by Android)\n- `onCharacteristicNotification` (❌ not emitted by Android)\n- `onBatteryLevel` (❌ not emitted by Android)\n- `onSubscriptionReady` (❌ not emitted by Android)\n\nAndroid (`MeshPlugin.kt`) currently emits:\n- `onDeviceStatus` from `MeshStatusCallbacks.onMeshMessageReceived`.\n\n## Scope\nOnce the contract is defined, choose one consistent path:\n- Implement the missing callback events in Android and wire them to real behavior, OR\n- Remove/feature-flag the Dart handlers and any logic that depends on those events.\n\n## Verification\n- Exercise an end-to-end scenario that should trigger each event in the contract.\n- Confirm Dart receives events with correct payload shapes and no crashes.\n","acceptance_criteria":"Events implemented or removed per contract; Dart handlers match emitted events","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:39:01.303725058-07:00","updated_at":"2025-12-21T20:34:55.412280202-07:00","dependencies":[{"issue_id":"phone-manager-app-415","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.092716516-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-5b6","title":"Make flutter analyze exit 0","description":"## Goal\nEnsure the repo’s analysis step is reliable: the **analyze command we actually use** (per `phone-manager-app-f14`) should exit 0.\n\n## Why this exists\nDifferent environments treat analyzer output differently. Local `flutter analyze` may exit 0 even with `info` lints, while CI may run with stricter flags (e.g., `--fatal-infos`).\n\n## What to do\n1) Confirm the policy in `phone-manager-app-f14` (strict vs pragmatic vs hybrid).\n2) Make the repo match that policy by either:\n   - Fixing lints (preferred if strict), and/or\n   - Updating `analysis_options.yaml` severities/rules, and/or\n   - Aligning CI/dev docs to the intended `flutter analyze ...` command.\n\n## Repro / verification\nRun whichever command is chosen as the source of truth (examples):\n- Pragmatic: `flutter analyze`\n- Strict: `flutter analyze --fatal-infos --fatal-warnings`\n\n## Notes\nThis issue is intentionally blocked on:\n- policy (`phone-manager-app-f14`)\n- the specific lint-fix issues (`e3g`, `sw7`, `5kr`) and analyzer-doc issue (`ee2`) when policy is strict.\n","acceptance_criteria":"Chosen analyze command (per policy) exits 0 locally and in CI","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:37:31.365613476-07:00","updated_at":"2025-12-21T20:35:49.344123578-07:00","dependencies":[{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:42:53.581830219-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-e3g","type":"blocks","created_at":"2025-12-21T17:44:27.923672231-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-sw7","type":"blocks","created_at":"2025-12-21T17:44:27.966196216-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-5kr","type":"blocks","created_at":"2025-12-21T17:44:28.008092606-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-ee2","type":"blocks","created_at":"2025-12-21T17:44:28.050279114-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-5kr","title":"Fix use_rethrow_when_possible finding","description":"## Goal\nFix `use_rethrow_when_possible`.\n\n## Current finding\nPreviously observed in `lib/managers/gatt_mesh_client.dart` around the connection retry flow:\n- Pattern: `catch (e) { ... throw e; }`\n- Fix: replace with `rethrow` to preserve stack trace.\n\n## Scope\n- Replace `throw e;` with `rethrow;` in relevant catch blocks.\n- Keep behavior identical.\n\n## Verification\nRun the chosen analyze command (see `phone-manager-app-f14`) and confirm this lint is gone.\n","acceptance_criteria":"No use_rethrow_when_possible findings under chosen analyze policy","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:34.283263552-07:00","updated_at":"2025-12-21T20:36:01.757371045-07:00","dependencies":[{"issue_id":"phone-manager-app-5kr","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.836221835-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-d48","title":"Resolve stubbed native MethodChannel methods","description":"## Goal\nResolve the native MethodChannel methods that are currently stubs (`null`/`false`) but are called (or assumed) by Dart.\n\n## Why it matters\nThe UI/logic currently attempts a “native-managed” path in `DeviceDetailsScreen` and `PlatformMeshClient`, but the plugin explicitly returns placeholders for the required primitives.\n\n## Current stubbed implementations (Android)\nIn `android/app/src/main/kotlin/com/nordicmesh/nordic_mesh_manager/MeshPlugin.kt` the following return placeholders:\n- `getLightStates` -\u003e `result.success(null)`\n- `getBatteryLevels` -\u003e `result.success(null)`\n- `subscribeToCharacteristics` -\u003e `result.success(false)`\n- `isDeviceConnected` -\u003e `result.success(false)`\n- `disconnectDevice` -\u003e `result.success(false)`\n- `discoverServices` -\u003e `result.success(null)`\n- `readCharacteristic` -\u003e `result.success(null)`\n- `writeCharacteristic` -\u003e `result.success(false)`\n- `setNotify` -\u003e `result.success(false)`\n\nThe plugin comments currently say “handled by Dart GATT layer”, but Dart still attempts to use these APIs in some flows.\n\n## Scope options (pick one, consistent with the contract)\nA) **Implement these methods natively** (full native connection/services/notify support)\nB) **Remove/disable the Dart call paths** that depend on these methods\nC) **Hybrid**: keep mesh operations native, keep BAS/services/notify in Dart, and remove these MethodChannel methods from the contract.\n\n## Repro\n- Open `DeviceDetailsScreen` for a device.\n- Trigger the “native” fallback path (happens when FlutterBlue can’t locate a connected device).\n- Observe calls to `discoverServices`, `subscribeToCharacteristics`, `getBatteryLevels`.\n\n## Notes\nThis should only be executed after the contract is finalized in `phone-manager-app-njl`.\n","acceptance_criteria":"Stubbed methods addressed (implemented, removed, or gated); callers updated","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:39:13.557868015-07:00","updated_at":"2025-12-21T20:34:15.598945396-07:00","dependencies":[{"issue_id":"phone-manager-app-d48","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.132419325-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-e3g","title":"Fix brace-style lint findings","description":"## Goal\nFix `curly_braces_in_flow_control_structures` findings (mostly in `lib/managers/device_manager.dart`).\n\n## Why it matters\nIf the repo uses strict analysis (see `phone-manager-app-f14`), `info` lints can fail CI.\n\n## Scope\n- Convert single-statement `if/for/while` bodies into braced blocks.\n- Keep logic identical (no behavior changes).\n\n## How to find occurrences\nRun the chosen analyze command (see `phone-manager-app-f14`) and filter for:\n- `curly_braces_in_flow_control_structures`\n\n## Verification\n- No `curly_braces_in_flow_control_structures` findings remain.\n- `flutter test` passes.\n","acceptance_criteria":"No curly_braces_in_flow_control_structures findings under chosen analyze policy","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:09.596068466-07:00","updated_at":"2025-12-21T20:36:23.946020376-07:00","dependencies":[{"issue_id":"phone-manager-app-e3g","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.73000341-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-ee2","title":"Document analysis_options.yaml conventions","description":"## Goal\nDocument `analysis_options.yaml` conventions so future changes don’t silently break `flutter analyze`.\n\n## Background\nYAML treats unquoted `*`/`**` patterns as alias syntax. We hit a parse failure (“Undefined alias”) until glob patterns like `**/...` were quoted.\n\n## What to document\n- Any glob in `analysis_options.yaml` starting with `*` should be quoted, e.g.:\n  - `\"**/generated/**\"`\n  - `\"**/*.g.dart\"`\n  - `\"**/*.freezed.dart\"`\n- What we exclude and why (generated/build/native folders).\n- The source-of-truth analyze command (whatever is decided in `phone-manager-app-f14`).\n\n## Suggested location\n- Add a short section to `SETUP.md` or `TECHNICAL.md` (or a dedicated `ANALYZER.md`).\n\n## Verification\n- `flutter analyze` runs without YAML parse errors.\n- The documented analyze command matches current practice.\n","acceptance_criteria":"Docs explain analysis_options.yaml quoting rules + analyze command","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:42.972087183-07:00","updated_at":"2025-12-21T20:36:13.691839678-07:00","dependencies":[{"issue_id":"phone-manager-app-ee2","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.876287018-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-f14","title":"Choose lint/analyzer policy","description":"## Goal\nPick and document the repo-wide analyzer/lint policy so other issues can be executed without guesswork.\n\n## Why this blocks other work\nSeveral follow-up issues (brace style, `is!`, `rethrow`, and potentially analyzer config) depend on whether CI/dev treats `info` lints as fatal.\n\n## Current state\n- `flutter analyze` currently reports multiple `info` lints (mostly in `lib/managers/device_manager.dart`).\n- Depending on flags (commonly `--fatal-infos` / `--fatal-warnings`) CI may fail even if local `flutter analyze` exits 0.\n\n## Decision to make\nChoose ONE of these and write it down explicitly (in this issue + docs/CI/config):\n1) **Strict**: Treat infos as fatal.\n   - CI uses `flutter analyze --fatal-infos --fatal-warnings`.\n   - We fix code to eliminate infos (preferred for long-term hygiene).\n2) **Pragmatic**: Allow info lints.\n   - CI uses `flutter analyze` (no fatal flags).\n   - We may still fix some lints opportunistically, but style nits don’t block.\n3) **Hybrid**: Only some rules are enforced.\n   - Use `analysis_options.yaml` severity overrides (e.g., ignore selected rules).\n   - CI still runs strict but selected rules won’t fail.\n\n## Where to encode the policy\n- `analysis_options.yaml` (rule enable/disable + severities)\n- Any CI workflow / local dev docs (if present) to specify the exact analyze command\n\n## Repro / verification\nRun both to see what policy implies:\n- `flutter analyze`\n- `flutter analyze --fatal-infos --fatal-warnings`\n\n## Notes for agents\nAfter this decision is made, unblock and execute:\n- `phone-manager-app-e3g` (brace style)\n- `phone-manager-app-sw7` (`prefer_is_not_operator`)\n- `phone-manager-app-5kr` (`use_rethrow_when_possible`)\n- `phone-manager-app-ee2` (document analyzer config conventions)\n- `phone-manager-app-5b6` (ensure analyze exits 0 under the chosen policy)\n","acceptance_criteria":"Decision recorded; repo configured to match; command documented","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:37:54.754832336-07:00","updated_at":"2025-12-21T20:32:29.472487065-07:00"}
{"id":"phone-manager-app-f43","title":"Simplify DeviceDetailsScreen connection paths","description":"## Goal\nSimplify `DeviceDetailsScreen` so it does not present/attempt connection flows that can’t work with the current plugin contract.\n\n## Current behavior\n`lib/screens/device_details_screen.dart` has two connection paths:\n1) FlutterBlue direct BLE path (connect + discover services)\n2) “native mesh plugin” fallback path using `PlatformMeshClient` methods like:\n   - `subscribeToDeviceCharacteristics`\n   - `getBatteryLevels`\n   - `discoverServices`\n   - `isDeviceConnectedNative`\n\nBut the Android plugin stubs the underlying MethodChannel calls (see `phone-manager-app-d48`).\n\n## Desired outcome\nPick ONE primary path and make the UI/logic consistent:\n- If we keep FlutterBlue-only for BAS/services/notify, remove native-path UI logic and any implied support.\n- If we want native-managed GATT, implement the plugin methods and keep the Dart path minimal.\n\n## Guardrails\n- Avoid scan/connect churn that fights `DeviceManager` scan cycles.\n- Prefer delegating BLE operations to a manager/service rather than the widget.\n\n## Verification\n- Connect/disconnect reliably.\n- Battery read works (via chosen path).\n- No dead buttons / misleading status text.\n","acceptance_criteria":"DeviceDetailsScreen uses one reliable path; no interaction with stubbed native APIs","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:05.994904324-07:00","updated_at":"2025-12-21T20:35:05.903259721-07:00","dependencies":[{"issue_id":"phone-manager-app-f43","depends_on_id":"phone-manager-app-415","type":"blocks","created_at":"2025-12-21T17:44:28.174365349-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-f43","depends_on_id":"phone-manager-app-d48","type":"blocks","created_at":"2025-12-21T17:44:28.216979876-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-jvb","title":"Update docs after removing sdks/","description":"## Goal\nUpdate documentation to reflect that the vendored `sdks/` directory was removed and the project uses published dependencies instead.\n\n## What changed\n- `sdks/` (vendored Nordic sources) is no longer part of the repo.\n- Android pulls the Nordic Mesh library from Maven via Gradle dependencies (see `android/app/build.gradle.kts`).\n\n## What to update\n- Setup/build docs that implied `sdks/` is required.\n- References to local SDK checkouts or paths.\n- Ensure contributors know where the Nordic mesh dependency comes from and how to update it.\n\n## Decisions\n- Document Android Nordic Mesh dependency as a Maven/Gradle dependency (no local `sdks/`).\n- Adjust verification grep commands to exclude `.beads/` because it contains a Unix socket (`bd.sock`) that causes `grep -R` to exit non-zero.\n\n## How to verify\nSearch for stale references:\n- `grep -R \"sdks/\" -n . --exclude-dir=.beads --exclude-dir=.venv`\n- `grep -R \"Android-nRF-Mesh-Library\" -n . --exclude-dir=.beads --exclude-dir=.venv` (should remain only as an informational link/reference, not as a required local folder)\n\n## Suggested files to review\n- `README.md`\n- `SETUP.md`\n- `TECHNICAL.md`\n- `ARCHITECTURE_REDESIGN.md` (if it mentions vendored SDKs)\n","acceptance_criteria":"Docs mention sdks removal; setup reflects Maven deps; no stale references","status":"closed","issue_type":"task","created_at":"2025-12-21T17:42:19.185065889-07:00","updated_at":"2025-12-21T20:48:25.765514268-07:00","closed_at":"2025-12-21T20:48:25.765514268-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-njl","title":"Define MethodChannel API contract","description":"## Goal\nDefine the **authoritative MethodChannel contract** between Dart and Android so platform work is implementable, testable, and doesn’t drift.\n\n## Channel\n- Name: `mesh_plugin`\n\n## Current Dart entrypoint(s)\n- `lib/managers/real_mesh_client.dart` (`PlatformMeshClient`)\n- `lib/screens/device_details_screen.dart` (native connection fallback path)\n\n## Current Android entrypoint\n- `android/app/src/main/kotlin/com/nordicmesh/nordic_mesh_manager/MeshPlugin.kt`\n\n## Methods currently handled by Android plugin\nAs implemented in `MeshPlugin.onMethodCall`:\n- `isAvailable`\n- `initialize`\n- `setMeshCredentials`\n- `ensureProxyConnection`\n- `connectToDevice`\n- `disconnectFromDevice`\n- `triggerGroup`\n- `sendGroupMessage`\n- `readBatteryLevel`\n- `getLightStates` *(currently returns null)*\n- `getBatteryLevels` *(currently returns null)*\n- `subscribeToCharacteristics` *(currently returns false)*\n- `isDeviceConnected` *(currently returns false)*\n- `disconnectDevice` *(currently returns false)*\n- `discoverServices` *(currently returns null)*\n- `readCharacteristic` *(currently returns null)*\n- `writeCharacteristic` *(currently returns false)*\n- `setNotify` *(currently returns false)*\n- `discoverGroupMembers`\n- `sendUnicastMessage`\n- `sendUnicastGet`\n- `configureProxyFilter`\n- `getNodeSubscriptions`\n- `resetMeshNetwork`\n\n## Callbacks / events (Android -\u003e Dart)\nCurrently implemented:\n- `onDeviceStatus` with args `{ unicastAddress: int, state: bool, targetState: bool? }`\n\nDart currently expects (see `PlatformMeshClient` handler):\n- `onDeviceStatus`\n- `onMeshPduCreated` (expects `{ macs: [String], groupId: int, fallback: bool }`)\n- `onCharacteristicNotification` (expects `{ mac: String, uuid: String, value: [int] }`)\n- `onBatteryLevel` (expects `{ mac: String, battery: int }`)\n- `onSubscriptionReady` (expects `{ mac: String }`)\n\n## What this issue should produce\nCreate a short, explicit contract doc (recommended: add a dedicated section to `TECHNICAL.md` or create a new `METHOD_CHANNEL_CONTRACT.md`) that specifies:\n- For each method:\n  - name\n  - arguments (required/optional keys + types)\n  - return type and meaning (including `null` vs empty map/list)\n  - error codes (`result.error`) and when they occur\n- For each callback:\n  - event name\n  - payload shape\n  - timing guarantees (e.g., “may arrive multiple times”, “dedup required”, “main thread”)\n- Normalization rules:\n  - MAC canonical form in payloads (recommend `aa:bb:cc:dd:ee:ff` lowercase)\n\n## Out of scope\nImplementing the contract. That work is tracked in dependent issues.\n","acceptance_criteria":"Contract document exists; method/event shapes are explicit; follow-up issues can implement without guessing","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:50.234289206-07:00","updated_at":"2025-12-21T20:33:30.958392832-07:00"}
{"id":"phone-manager-app-sdj","title":"Add mesh-client capability tests","description":"## Goal\nAdd tests that validate mesh client capability gating and fallback behavior (especially around the platform plugin boundary).\n\n## Why it matters\nA lot of dead-by-mismatch risk comes from Dart assuming the plugin supports methods/events that it doesn’t. Tests should lock in expected behavior and prevent regressions.\n\n## Suggested test focus\n- `PlatformMeshClient` behavior when:\n  - plugin is unavailable (`isAvailable` false / MissingPluginException) -\u003e uses fallback\n  - plugin returns null/false for certain methods -\u003e uses fallback or cached behavior\n- Capability/contract enforcement once `phone-manager-app-njl` is defined.\n\n## Candidate files\n- `lib/managers/mesh_client.dart`\n- `lib/managers/real_mesh_client.dart`\n\n## Notes\nThis is blocked on:\n- `phone-manager-app-njl` (contract), and\n- `phone-manager-app-415` (callback alignment), so tests can match the final surface area.\n\n## Verification\n- `flutter test` passes.\n- Tests fail if someone reintroduces “assume callback exists” behavior.\n","acceptance_criteria":"Capability tests cover plugin availability + fallback behavior","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T17:41:59.489267097-07:00","updated_at":"2025-12-21T20:37:57.428180603-07:00","dependencies":[{"issue_id":"phone-manager-app-sdj","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.259802735-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-sdj","depends_on_id":"phone-manager-app-415","type":"blocks","created_at":"2025-12-21T17:44:28.324179122-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-sw7","title":"Fix prefer_is_not_operator finding","description":"## Goal\nFix `prefer_is_not_operator` findings.\n\n## Typical fix\nReplace:\n- `!(x is T)`\nwith:\n- `x is! T`\n\n## Known location\nPreviously observed in `lib/managers/device_manager.dart` around ~1361.\n\n## Verification\nRun the chosen analyze command (see `phone-manager-app-f14`) and confirm this lint is gone.\n","acceptance_criteria":"No prefer_is_not_operator findings under chosen analyze policy","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:18.452354468-07:00","updated_at":"2025-12-21T20:36:33.112453782-07:00","dependencies":[{"issue_id":"phone-manager-app-sw7","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.793309697-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-v1v","title":"Externalize mesh credentials","description":"## Goal\nRemove hard-coded mesh credentials from code and provide a safe, documented configuration mechanism.\n\n## Current state\n`lib/managers/device_manager.dart` seeds hard-coded keys at startup (example netKey/appKey in the constructor area).\n\n## Why it matters\n- Hard-coded credentials are easy to leak and hard to rotate.\n- Makes multi-network testing painful.\n\n## Options (pick one)\nA) **Build-time injection** using `--dart-define` (simple, works for dev/CI).\nB) **Runtime config** via an assets file (dev-only) or a settings screen (prod).\nC) **Secure storage** (store after user input) for production.\n\n## Scope\n- Provide a single “source of truth” for credentials.\n- Ensure `DeviceManager.setMeshCredentials()` remains the integration point.\n- Update docs on how to set creds for mesh testing.\n\n## Verification\n- App starts with a clear status when creds are missing.\n- Mesh initialization uses provided creds when present.\n- No secrets committed in repo.\n","acceptance_criteria":"Mesh creds are configurable (not hard-coded) with a safe default for dev","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:41:30.497250513-07:00","updated_at":"2025-12-21T20:37:17.38036791-07:00"}
{"id":"phone-manager-app-wmm","title":"Centralize MAC normalization","description":"## Goal\nCentralize MAC normalization so comparisons and map keys are consistent across the app.\n\n## Current state\nMany call sites do ad-hoc normalization like:\n- `.toLowerCase().replaceAll('-', ':')`\n\nFound in:\n- `lib/managers/device_manager.dart`\n- `lib/managers/real_mesh_client.dart`\n- `lib/managers/gatt_mesh_client.dart`\n- `lib/screens/device_details_screen.dart`\n\n## Desired outcome\n- Introduce a single helper (e.g., `normalizeMac(String)` returning lowercase colon form).\n- Replace duplicate inline normalization at call sites.\n- Ensure plugin payloads follow the same canonical form (ties into `phone-manager-app-njl`).\n\n## Verification\n- No behavior changes in discovery/connection.\n- Reduced duplicate normalization code.\n","acceptance_criteria":"All MAC comparisons use one canonicalizer; fewer duplicate normalize snippets","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:55.58304668-07:00","updated_at":"2025-12-21T20:37:28.243593718-07:00"}
