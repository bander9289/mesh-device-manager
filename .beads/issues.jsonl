{"id":"phone-manager-app-0jg","title":"Split DeviceManager responsibilities","description":"## Goal\nBreak up `DeviceManager` into smaller units with clearer responsibilities (keep UI behavior the same).\n\n## Why it matters\n`DeviceManager` is currently a large god-object mixing:\n- scanning + permission orchestration\n- proxy connection management\n- mesh group membership discovery\n- UI state and timers\n- device model caching + normalization\n\nThis makes changes risky and contributes to duplicated logic.\n\n## Suggested decomposition (incremental)\n1) **ScanningService**\n   - BLE scan start/stop, dedupe, timeouts\n2) **MeshTransportService**\n   - proxy connection, filter config, send group/unicast\n3) **GroupMembershipService**\n   - membership discovery + persistence\n4) **DeviceStateStore**\n   - canonical device list + MAC normalization + updates\n\n`DeviceManager` can remain the Provider-facing facade initially, delegating to these services.\n\n## Guardrails\n- No behavioral changes during the first extraction pass.\n- Keep async/Stream lifecycles explicit and testable.\n- Avoid cyclic dependencies between services.\n\n## Implementation Notes (2025-12-22)\n- Extracted BLE scan responsibilities into `BleScanningService` (new file: `lib/managers/services/ble_scanning_service.dart`).\n- Extracted group address allocation + group list utilities into `GroupStore` (new file: `lib/managers/services/group_store.dart`).\n- `DeviceManager` remains the Provider-facing facade and delegates scanning/group-list logic to these services; public methods/signatures remain the same.\n\n## Verification\n- `flutter test` passes.\n- Manual smoke remains: scan shows devices; group dropdown still defaults to Default (0xC000); triggers still work.\n","acceptance_criteria":"DeviceManager responsibilities split; public UI behavior unchanged; tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:34.203069956-07:00","updated_at":"2025-12-21T21:02:41.158197674-07:00","closed_at":"2025-12-21T21:02:41.158197674-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-22a","title":"Fix MissingPluginException for getNodeSubscriptions","description":"## Goal\nStop runtime spam: MissingPluginException for getNodeSubscriptions.\n\n## Fix\n- Implemented getNodeSubscriptions handler in Android MeshPlugin and wired it into onMethodCall.\n- Returns a Dart-compatible List\u003cMap\u003e.\n\n## Verification\n- ./gradlew :app:compileDebugKotlin (BUILD SUCCESSFUL)\n- Manual: confirmed on-device that the MissingPluginException log no longer appears when triggering the group-discovery sync flow.\n","acceptance_criteria":"No MissingPluginException for getNodeSubscriptions; Android plugin handles method and returns a List\u003cMap\u003e compatible with PlatformMeshClient.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T15:07:00.150247408-07:00","updated_at":"2025-12-24T15:14:47.230516161-07:00","closed_at":"2025-12-24T15:14:47.230516161-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-415","title":"Align Dart/native callback events","description":"## Goal\nAlign Dart-side expected callbacks with what Android actually emits, per the authoritative contract.\n\n## Current mismatch (before this issue)\nDart (`PlatformMeshClient` in `lib/managers/real_mesh_client.dart`) had handlers for:\n- `onDeviceStatus` (✅ emitted by Android)\n- `onMeshPduCreated` (❌ not emitted by Android)\n- `onCharacteristicNotification` (❌ not emitted by Android)\n- `onBatteryLevel` (❌ not emitted by Android)\n- `onSubscriptionReady` (❌ not emitted by Android)\n\nAndroid (`MeshPlugin.kt`) emits:\n- `onDeviceStatus` from `MeshStatusCallbacks.onMeshMessageReceived`.\n\n## Decision (chosen path)\nRemove/ignore Dart handlers for callbacks that Android does not emit today.\n\nRationale:\n- Implementing these callbacks “for real” requires additional native work (some are currently stubbed at the method level), tracked in other issues.\n- Keeping dead handlers created confusion and implied support that doesn’t exist.\n\n## What changed\n- `PlatformMeshClient` now handles only `onDeviceStatus` and ignores other callbacks.\n- Removed DeviceManager wiring for battery/subscription-ready callbacks that were never invoked (since Android doesn’t emit those events).\n- Updated `METHOD_CHANNEL_CONTRACT.md` to treat non-emitted events as **reserved** names (not relied on by Dart core flows).\n\n## Verification\nAutomated:\n- `flutter analyze --fatal-infos --fatal-warnings`\n- `flutter test`\n\nManual (required to fully validate runtime event path):\n- With a real mesh setup, trigger an action that causes Android to receive a `GenericOnOffStatus` and confirm Dart receives `onDeviceStatus` without crashes.\n\n## Out of scope\nImplementing the missing callback events on Android (tracked elsewhere).\n","acceptance_criteria":"Events implemented or removed per contract; Dart handlers match emitted events","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:39:01.303725058-07:00","updated_at":"2025-12-24T15:59:10.695736994-07:00","closed_at":"2025-12-24T15:59:10.695736994-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-415","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.092716516-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-5b6","title":"Make flutter analyze exit 0","description":"## Goal\nEnsure the repo’s analysis step is reliable: the **analyze command we actually use** (per `phone-manager-app-f14`) should exit 0.\n\n## Why this exists\nDifferent environments treat analyzer output differently. Local `flutter analyze` may exit 0 even with `info` lints, while CI may run with stricter flags (e.g., `--fatal-infos`).\n\n## What to do\n1) Confirm the policy in `phone-manager-app-f14` (strict vs pragmatic vs hybrid).\n2) Make the repo match that policy by either:\n   - Fixing lints (preferred if strict), and/or\n   - Updating `analysis_options.yaml` severities/rules, and/or\n   - Aligning CI/dev docs to the intended `flutter analyze ...` command.\n\n## Repro / verification\nRun whichever command is chosen as the source of truth (examples):\n- Pragmatic: `flutter analyze`\n- Strict: `flutter analyze --fatal-infos --fatal-warnings`\n\n## Notes\nThis issue is intentionally blocked on:\n- policy (`phone-manager-app-f14`)\n- the specific lint-fix issues (`e3g`, `sw7`, `5kr`) and analyzer-doc issue (`ee2`) when policy is strict.\n","acceptance_criteria":"Chosen analyze command (per policy) exits 0 locally and in CI","notes":"2025-12-24 follow-up: after removing the library directive, converted the file header '///' block in lib/utils/mac_address.dart to regular '//' comments to avoid dangling_library_doc_comments while keeping function docs intact. Verified: flutter analyze --fatal-infos --fatal-warnings =\u003e No issues found.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:37:31.365613476-07:00","updated_at":"2025-12-24T15:31:01.019005535-07:00","closed_at":"2025-12-24T15:31:01.019005535-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:42:53.581830219-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-e3g","type":"blocks","created_at":"2025-12-21T17:44:27.923672231-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-sw7","type":"blocks","created_at":"2025-12-21T17:44:27.966196216-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-5kr","type":"blocks","created_at":"2025-12-21T17:44:28.008092606-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-5b6","depends_on_id":"phone-manager-app-ee2","type":"blocks","created_at":"2025-12-21T17:44:28.050279114-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-5kr","title":"Fix use_rethrow_when_possible finding","description":"## Goal\nFix `use_rethrow_when_possible`.\n\n## What changed\n- Updated the connection retry flow to use `rethrow;` instead of `throw e;` so the original stack trace is preserved.\n\n## Where\n- `lib/managers/gatt_mesh_client.dart` (`_connectWithRetry`)\n\n## Verification\n- `flutter analyze --fatal-infos --fatal-warnings`\n  - No `use_rethrow_when_possible` findings.\n  - Analyzer still reports an unrelated `unnecessary_library_name` finding (tracked separately).\n","acceptance_criteria":"No use_rethrow_when_possible findings under chosen analyze policy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:34.283263552-07:00","updated_at":"2025-12-24T15:14:47.183432593-07:00","closed_at":"2025-12-24T15:14:47.183432593-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-5kr","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.836221835-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-bld","title":"DeviceDetails Connect fails on Android (android-code 257 / FAILURE_REGISTERING_CLIENT)","description":"## Goal\nTrack and investigate Android BLE connect failures from Device Details:\n\n```\nFlutterBluePlusException | connect | android-code: 257 | FAILURE_REGISTERING_CLIENT\n```\n\nThis is being **shelved** for now so we can stay focused on `phone-manager-app-d48` (already closed).\n\n## Repro\n1) Run app on Android device.\n2) Go to a device’s Details screen.\n3) Tap **Connect**.\n4) Observe failure in logs.\n\n## Observed\n- Log: `Connect failed: FlutterBluePlusException | connect | android-code: 257 | FAILURE_REGISTERING_CLIENT`\n- Retrying immediately often reproduces.\n\n## Expected\n- Connect succeeds reliably (or fails with actionable guidance).\n\n## Notes / Hypotheses\n- Android stack sometimes fails GATT client registration when scanning is active or BLE resources are busy.\n- Could be influenced by app-wide scan cycles / rapid connect-disconnect / stale GATT state.\n\n## Attempts (reverted)\nWe attempted:\n- stopping scan before connect\n- short retry loop on 257\n\nIt did **not** resolve the issue and was reverted to keep scope focused.\n\n## Candidate next steps (future)\n- Ensure a single app-wide BLE concurrency policy: pause scan + avoid parallel connects during connect/service discovery.\n- Explicitly serialize connects through `DeviceManager` (rather than widget-level connect).\n- Add UI/telemetry: show whether scanning is running at connect time; log adapter state.\n- Consider Android-side mitigations: longer delay between disconnect/reconnect, clear GATT cache patterns (careful), request higher MTU after connect (if relevant).\n","acceptance_criteria":"- New issue captures repro, logs, and hypotheses\\n- DeviceDetails connect failure is tracked separately from d48; no changes required to d48 scope","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-24T16:38:31.51449145-07:00","updated_at":"2025-12-24T16:38:31.51449145-07:00"}
{"id":"phone-manager-app-d48","title":"Resolve stubbed native MethodChannel methods","description":"## Goal\nResolve the native MethodChannel methods that are currently stubs (`null`/`false`) but are called (or assumed) by Dart.\n\n## Decision (chosen scope option)\n**C) Hybrid**: keep mesh operations native, keep BAS/services/notify in Dart, and **remove/disable Dart call paths** that depend on the stubbed Android “GATT helper” APIs.\n\nRationale:\n- Android plugin explicitly returns placeholders for these methods and comments already state “handled by Dart GATT layer”.\n- Implementing these methods natively would be a larger effort and duplicates FlutterBlue capabilities.\n\n## What changed\n- `DeviceDetailsScreen` no longer attempts plugin-managed connection/services/notify/read/write. It is FlutterBlue/GATT-only for per-device details.\n- `DeviceManager.triggerGroup` no longer attempts plugin-side characteristic reads/writes (which depended on stubbed methods). It uses `forceGATTFallbackSend(...)` instead.\n- Contract doc updated to mark stubbed methods as intentionally unsupported in the hybrid architecture.\n\n## Verification\n- `flutter analyze --fatal-infos --fatal-warnings`\n- `flutter test`\n\n## Manual verification (required)\n- Open Device Details for a device and confirm Connect/Discover/Read Battery/Subscribe still behave as expected via FlutterBlue.\n- Trigger a group action and confirm no errors from removed stub paths.\n","acceptance_criteria":"Stubbed methods addressed (implemented, removed, or gated); callers updated","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:39:13.557868015-07:00","updated_at":"2025-12-24T16:12:02.454491949-07:00","closed_at":"2025-12-24T16:12:02.454491949-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-d48","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.132419325-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-e3g","title":"Fix brace-style lint findings","description":"## Goal\nFix `curly_braces_in_flow_control_structures` findings (mostly in `lib/managers/device_manager.dart`).\n\n## Why it matters\nIf the repo uses strict analysis (see `phone-manager-app-f14`), `info` lints can fail CI.\n\n## Scope\n- Convert single-statement `if/for/while` bodies into braced blocks.\n- Keep logic identical (no behavior changes).\n\n## How to find occurrences\nRun the chosen analyze command (see `phone-manager-app-f14`) and filter for:\n- `curly_braces_in_flow_control_structures`\n\n## Verification\n- No `curly_braces_in_flow_control_structures` findings remain.\n- `flutter test` passes.\n","acceptance_criteria":"No curly_braces_in_flow_control_structures findings under chosen analyze policy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:09.596068466-07:00","updated_at":"2025-12-21T23:35:12.141698897-07:00","closed_at":"2025-12-21T23:35:12.141698897-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-e3g","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.73000341-07:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"phone-manager-app-e3g","author":"banders","text":"Progress: fixed curly_braces_in_flow_control_structures findings (braced single-statement control-flow blocks) primarily in lib/managers/device_manager.dart. Ran dart formatter on the file to ensure edits persisted. Verification: 'flutter analyze --fatal-infos --fatal-warnings | grep curly_braces_in_flow_control_structures' shows no matches (analyzer now reports 2 remaining non-curly issues). 'flutter test' passes.","created_at":"2025-12-22T06:30:07Z"}]}
{"id":"phone-manager-app-ee2","title":"Document analysis_options.yaml conventions","description":"## Goal\nDocument `analysis_options.yaml` conventions so future changes don’t silently break `flutter analyze`.\n\n## Background\nYAML treats unquoted `*`/`**` patterns as alias syntax. We previously hit a parse failure (“Undefined alias”) when glob patterns like `**/...` were left unquoted.\n\n## Decisions\n- **Source-of-truth analyze command:** `flutter analyze --fatal-infos --fatal-warnings` (per `phone-manager-app-f14`).\n- **Doc location:** Added a short, discoverable note in `SETUP.md` under **Project Setup → Check for Issues**.\n- **In-file safety note:** Added a warning comment in `analysis_options.yaml` near `analyzer: exclude:`.\n\n## Conventions to follow\n- Quote any glob in `analysis_options.yaml` that starts with `*`, e.g.:\n  - `\"**/generated/**\"`\n  - `\"**/*.g.dart\"`\n  - `\"**/*.freezed.dart\"`\n- Excludes intentionally cover platform/build/generated outputs (e.g. `android/`, `ios/`, `linux/`, `build/`, `.dart_tool/`, and `**/generated/**`) so analysis focuses on our Dart sources.\n\n## Verification\n- `flutter analyze --fatal-infos --fatal-warnings`\n  - Runs without YAML parse errors.\n  - May still exit non-zero due to current lint findings (out of scope for this doc-only issue).\n","acceptance_criteria":"Docs explain analysis_options.yaml quoting rules + analyze command (and point to SETUP.md)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:42.972087183-07:00","updated_at":"2025-12-24T15:23:51.636437489-07:00","closed_at":"2025-12-24T15:23:51.636437489-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-ee2","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.876287018-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-f14","title":"Choose lint/analyzer policy","description":"## Goal\nPick and document the repo-wide analyzer/lint policy so other issues can be executed without guesswork.\n\n## Decision\n**Strict**: Treat lints reported as `info`/`warning` as fatal for the purposes of our repo “analysis gate”.\n\n**Source-of-truth analyze command:**\n- `flutter analyze --fatal-infos --fatal-warnings`\n\nRationale:\n- Keeps developer machines + eventual CI aligned.\n- Prevents style/hygiene drift (we already have lint-fix issues queued for the current findings).\n\n## Current state (observed)\nRunning either of these currently reports the same set of findings (all `info`), and exits non-zero:\n- `flutter analyze`\n- `flutter analyze --fatal-infos --fatal-warnings`\n\nNotable rule families currently firing:\n- `curly_braces_in_flow_control_structures` (many)\n- `prefer_is_not_operator`\n- `use_rethrow_when_possible`\n- `unnecessary_library_name`\n- `prefer_conditional_assignment`\n\n## Where the policy is encoded\n- `analysis_options.yaml` documents the policy + the source-of-truth command.\n- `SETUP.md` uses the source-of-truth command in the setup checklist.\n\n## Follow-ups unblocked by this decision\nProceed with:\n- `phone-manager-app-e3g` (brace style)\n- `phone-manager-app-sw7` (`prefer_is_not_operator`)\n- `phone-manager-app-5kr` (`use_rethrow_when_possible`)\n- `phone-manager-app-ee2` (document analyzer config conventions)\n- `phone-manager-app-5b6` (ensure analyze exits 0 under this policy)\n\n## Repro / verification\n- `flutter analyze`\n- `flutter analyze --fatal-infos --fatal-warnings`\n","acceptance_criteria":"Decision recorded; repo configured to match; command documented","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:37:54.754832336-07:00","updated_at":"2025-12-21T23:04:18.40962869-07:00","closed_at":"2025-12-21T23:04:18.40962869-07:00","close_reason":"Closed","comments":[{"id":2,"issue_id":"phone-manager-app-f14","author":"banders","text":"Decision finalized (verified locally): **Strict** analyzer policy. Source-of-truth command is: Analyzing phone-manager-app...                                  \n\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:101:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:116:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:198:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:226:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:233:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:555:7 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:632:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:675:7 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:682:9 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:694:13 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:707:9 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:728:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:767:9 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:770:9 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:787:15 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:794:15 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:874:21 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:879:19 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:906:17 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:961:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:969:7 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1005:15 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1043:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1048:15 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1087:9 • curly_braces_in_flow_control_structures\n   info • Use the 'is!' operator rather than negating the value of the 'is' operator • lib/managers/device_manager.dart:1105:9 • prefer_is_not_operator\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1255:9 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1297:7 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1305:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1310:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1347:11 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1357:13 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1379:13 • curly_braces_in_flow_control_structures\n   info • Statements in an if should be enclosed in a block • lib/managers/device_manager.dart:1402:11 • curly_braces_in_flow_control_structures\n   info • The 'if' statement could be replaced by a null-aware assignment • lib/managers/device_manager.dart:1481:9 • prefer_conditional_assignment\n   info • Use 'rethrow' to rethrow a caught exception • lib/managers/gatt_mesh_client.dart:190:13 • use_rethrow_when_possible\n   info • Library names are not necessary • lib/utils/mac_address.dart:10:9 • unnecessary_library_name.\n\nPolicy is documented in  and referenced from . Note: current repo still reports 37 File: dir,\tNode: Top,\tThis is the top of the INFO tree.\n\nThis is the Info main menu (aka directory node).\nA few useful Info commands:\n\n  'q' quits;\n  'H' lists all Info commands;\n  'h' starts the Info tutorial;\n  'mTexinfo RET' visits the Texinfo manual, etc.\n\n* Menu:\n\nBasics\n* Common options: (coreutils)Common options.\n* Coreutils: (coreutils).       Core GNU (file, text, shell) utilities.\n* Date input formats: (coreutils)Date input formats.\n* Ed: (ed).                     The GNU line editor\n* File permissions: (coreutils)File permissions.\n                                Access modes.\n* Finding files: (find).        Operating on files matching certain criteria.\n* Time: (time).                 time\n\nCompression\n* Gzip: (gzip).                 General (de)compression of files (lzw).\n\nDevelopment\n* SSIP: (ssip).                 Speech Synthesis Interface Protocol.\n* Speech Dispatcher: (speech-dispatcher).\n                                Speech Dispatcher.\n* libffi: (libffi).             Portable foreign function interface library.\n\nEditors\n* nano: (nano).                 Small and friendly text editor.\n\nGeneral Commands\n* Screen: (screen).             Full-screen window manager.\n\nGNU organization\n* Maintaining Findutils: (find-maint).\n                                Maintaining GNU findutils\n\nGNU Utilities\n* dirmngr-client: (gnupg).      X.509 CRL and OCSP client.\n* dirmngr: (gnupg).             X.509 CRL and OCSP server.\n* gpg-agent: (gnupg).           The secret key daemon.\n* gpg2: (gnupg).                OpenPGP encryption and signing tool.\n* gpgsm: (gnupg).               S/MIME encryption and signing tool.\n\nIndividual utilities\n* arch: (coreutils)arch invocation.             Print machine hardware name.\n* b2sum: (coreutils)b2sum invocation.           Print or check BLAKE2 digests.\n* base32: (coreutils)base32 invocation.         Base32 encode/decode data.\n* base64: (coreutils)base64 invocation.         Base64 encode/decode data.\n* basename: (coreutils)basename invocation.     Strip directory and suffix.\n* basenc: (coreutils)basenc invocation.         Encoding/decoding of data.\n* cat: (coreutils)cat invocation.               Concatenate and write files.\n* chcon: (coreutils)chcon invocation.           Change SELinux CTX of files.\n* chgrp: (coreutils)chgrp invocation.           Change file groups.\n* chmod: (coreutils)chmod invocation.           Change access permissions.\n* chown: (coreutils)chown invocation.           Change file owners and groups.\n* chroot: (coreutils)chroot invocation.         Specify the root directory.\n* cksum: (coreutils)cksum invocation.           Print POSIX CRC checksum.\n* cmp: (diffutils)Invoking cmp.                 Compare 2 files byte by byte.\n* comm: (coreutils)comm invocation.             Compare sorted files by line.\n* cp: (coreutils)cp invocation.                 Copy files.\n* csplit: (coreutils)csplit invocation.         Split by context.\n* cut: (coreutils)cut invocation.               Print selected parts of lines.\n* date: (coreutils)date invocation.             Print/set system date and time.\n* dd: (coreutils)dd invocation.                 Copy and convert a file.\n* df: (coreutils)df invocation.                 Report file system disk usage.\n* diff: (diffutils)Invoking diff.               Compare 2 files line by line.\n* diff3: (diffutils)Invoking diff3.             Compare 3 files line by line.\n* dircolors: (coreutils)dircolors invocation.   Color setup for ls.\n* dirname: (coreutils)dirname invocation.       Strip last file name component.\n* dir: (coreutils)dir invocation.               List directories briefly.\n* du: (coreutils)du invocation.                 Report on disk usage.\n* echo: (coreutils)echo invocation.             Print a line of text.\n* env: (coreutils)env invocation.               Modify the environment.\n* expand: (coreutils)expand invocation.         Convert tabs to spaces.\n* expr: (coreutils)expr invocation.             Evaluate expressions.\n* factor: (coreutils)factor invocation.         Print prime factors\n* false: (coreutils)false invocation.           Do nothing, unsuccessfully.\n* find: (find)Invoking find.                    Finding and acting on files.\n* fmt: (coreutils)fmt invocation.               Reformat paragraph text.\n* fold: (coreutils)fold invocation.             Wrap long input lines.\n* groups: (coreutils)groups invocation.         Print group names a user is in.\n* gunzip: (gzip)Overview.                       Decompression.\n* gzexe: (gzip)Overview.                        Compress executables.\n* head: (coreutils)head invocation.             Output the first part of files.\n* hostid: (coreutils)hostid invocation.         Print numeric host identifier.\n* hostname: (coreutils)hostname invocation.     Print or set system name.\n* id: (coreutils)id invocation.                 Print user identity.\n* install: (coreutils)install invocation.       Copy files and set attributes.\n* join: (coreutils)join invocation.             Join lines on a common field.\n* kill: (coreutils)kill invocation.             Send a signal to processes.\n* link: (coreutils)link invocation.             Make hard links between files.\n* ln: (coreutils)ln invocation.                 Make links between files.\n* locate: (find)Invoking locate.                Finding files in a database.\n* logname: (coreutils)logname invocation.       Print current login name.\n* ls: (coreutils)ls invocation.                 List directory contents.\n* md5sum: (coreutils)md5sum invocation.         Print or check MD5 digests.\n* mkdir: (coreutils)mkdir invocation.           Create directories.\n* mkfifo: (coreutils)mkfifo invocation.         Create FIFOs (named pipes).\n* mknod: (coreutils)mknod invocation.           Create special files.\n* mktemp: (coreutils)mktemp invocation.         Create temporary files.\n* mv: (coreutils)mv invocation.                 Rename files.\n* nice: (coreutils)nice invocation.             Modify niceness.\n* nl: (coreutils)nl invocation.                 Number lines and write files.\n* nohup: (coreutils)nohup invocation.           Immunize to hangups.\n* nproc: (coreutils)nproc invocation.           Print the number of processors.\n* numfmt: (coreutils)numfmt invocation.         Reformat numbers.\n* od: (coreutils)od invocation.                 Dump files in octal, etc.\n* paste: (coreutils)paste invocation.           Merge lines of files.\n* patch: (diffutils)Invoking patch.             Apply a patch to a file.\n* pathchk: (coreutils)pathchk invocation.       Check file name portability.\n* printenv: (coreutils)printenv invocation.     Print environment variables.\n* printf: (coreutils)printf invocation.         Format and print data.\n* pr: (coreutils)pr invocation.                 Paginate or columnate files.\n* ptx: (coreutils)ptx invocation.               Produce permuted indexes.\n* pwd: (coreutils)pwd invocation.               Print working directory.\n* readlink: (coreutils)readlink invocation.     Print referent of a symlink.\n* realpath: (coreutils)realpath invocation.     Print resolved file names.\n* rmdir: (coreutils)rmdir invocation.           Remove empty directories.\n* rm: (coreutils)rm invocation.                 Remove files.\n* runcon: (coreutils)runcon invocation.         Run in specified SELinux CTX.\n* sdiff: (diffutils)Invoking sdiff.             Merge 2 files side-by-side.\n* seq: (coreutils)seq invocation.               Print numeric sequences\n* sha1sum: (coreutils)sha1sum invocation.       Print or check SHA-1 digests.\n* sha2: (coreutils)sha2 utilities.              Print or check SHA-2 digests.\n* shred: (coreutils)shred invocation.           Remove files more securely.\n* shuf: (coreutils)shuf invocation.             Shuffling text files.\n* sleep: (coreutils)sleep invocation.           Delay for a specified time.\n* sort: (coreutils)sort invocation.             Sort text files.\n* split: (coreutils)split invocation.           Split into pieces.\n* stat: (coreutils)stat invocation.             Report file(system) status.\n* stdbuf: (coreutils)stdbuf invocation.         Modify stdio buffering.\n* stty: (coreutils)stty invocation.             Print/change terminal settings.\n* sum: (coreutils)sum invocation.               Print traditional checksum.\n* sync: (coreutils)sync invocation.             Synchronize memory to disk.\n* tac: (coreutils)tac invocation.               Reverse files.\n* tail: (coreutils)tail invocation.             Output the last part of files.\n* tee: (coreutils)tee invocation.               Redirect to multiple files.\n* test: (coreutils)test invocation.             File/string tests.\n* timeout: (coreutils)timeout invocation.       Run with time limit.\n* touch: (coreutils)touch invocation.           Change file timestamps.\n* true: (coreutils)true invocation.             Do nothing, successfully.\n* truncate: (coreutils)truncate invocation.     Shrink/extend size of a file.\n* tr: (coreutils)tr invocation.                 Translate characters.\n* tsort: (coreutils)tsort invocation.           Topological sort.\n* tty: (coreutils)tty invocation.               Print terminal name.\n* uname: (coreutils)uname invocation.           Print system information.\n* unexpand: (coreutils)unexpand invocation.     Convert spaces to tabs.\n* uniq: (coreutils)uniq invocation.             Uniquify files.\n* unlink: (coreutils)unlink invocation.         Removal via unlink(2).\n* updatedb: (find)Invoking updatedb.            Building the locate database.\n* uptime: (coreutils)uptime invocation.         Print uptime and load.\n* users: (coreutils)users invocation.           Print current user names.\n* vdir: (coreutils)vdir invocation.             List directories verbosely.\n* wc: (coreutils)wc invocation.                 Line, word, and byte counts.\n* whoami: (coreutils)whoami invocation.         Print effective user ID.\n* who: (coreutils)who invocation.               Print who is logged in.\n* xargs: (find)Invoking xargs.                  Operating on many files.\n* yes: (coreutils)yes invocation.               Print a string indefinitely.\n* zcat: (gzip)Overview.                         Decompression to stdout.\n* zdiff: (gzip)Overview.                        Compare compressed files.\n* zforce: (gzip)Overview.                       Force .gz extension on files.\n* zgrep: (gzip)Overview.                        Search compressed files.\n* zmore: (gzip)Overview.                        Decompression output by pages.\n\nLibraries\n* RLuserman: (rluserman).       The GNU readline library User's Manual.\n\nMath\n* bc: (bc).                     An arbitrary precision calculator language.\n\nMiscellaneous\n* dc: (dc).                     Arbitrary precision RPN \"Desktop Calculator\".\n\nNetwork applications\n* Wget: (wget).                 Non-interactive network downloader.\n\nProgramming\n* flex: (flex).                 Fast lexical analyzer generator (lex \n                                  replacement).\n\nProgramming Tools\n* Gperf: (gperf).               Perfect Hash Function Generator.\n\nSound\n* SSIP: (ssip).                 Speech Synthesis Interface Protocol.\n* Say for Speech Dispatcher: (spd-say).\n                                Say.\n* Speech Dispatcher: (speech-dispatcher).\n                                Speech Dispatcher.\n\nTexinfo documentation system\n* info stand-alone: (info-stnd).\n                                Read Info documents without Emacs.\n\nText creation and manipulation\n* Diffutils: (diffutils).       Comparing and merging files.\n* M4: (m4).                     A powerful macro processor.\n* grep: (grep).                 Print lines that match patterns.\n* sed: (sed).                   Stream EDitor.   lints and exits non-zero under this strict gate; follow-up lint-fix issues (, , ) +  will make the strict command pass.","created_at":"2025-12-22T06:03:21Z"},{"id":3,"issue_id":"phone-manager-app-f14","author":"banders","text":"Decision finalized (user verified): **Strict** analyzer policy.\n\nSource-of-truth analyze command:\n\n```bash\nflutter analyze --fatal-infos --fatal-warnings\n```\n\nPolicy is documented in:\n- analysis_options.yaml (policy + source-of-truth command)\n- SETUP.md (setup step uses strict command)\n\nExpected current status:\n- The strict command currently exits non-zero due to existing `info` lints; follow-up issues (brace style / `is!` / `rethrow` / etc.) will make it pass.\n","created_at":"2025-12-22T06:03:52Z"},{"id":4,"issue_id":"phone-manager-app-f14","author":"banders","text":"Decision finalized (user verified): **Strict** analyzer policy.\n\nSource-of-truth analyze command:\n\n```bash\nflutter analyze --fatal-infos --fatal-warnings\n```\n\nPolicy is documented in:\n- analysis_options.yaml (policy + source-of-truth command)\n- SETUP.md (setup step uses strict command)\n\nExpected current status:\n- The strict command currently exits non-zero due to existing `info` lints; follow-up issues (brace style / `is!` / `rethrow` / etc.) will make it pass.\n","created_at":"2025-12-22T06:04:15Z"}]}
{"id":"phone-manager-app-f43","title":"Simplify DeviceDetailsScreen connection paths","description":"## Goal\nSimplify `DeviceDetailsScreen` so it does not present/attempt connection flows that can’t work with the current plugin contract.\n\n## Current behavior\n`lib/screens/device_details_screen.dart` has two connection paths:\n1) FlutterBlue direct BLE path (connect + discover services)\n2) “native mesh plugin” fallback path using `PlatformMeshClient` methods like:\n   - `subscribeToDeviceCharacteristics`\n   - `getBatteryLevels`\n   - `discoverServices`\n   - `isDeviceConnectedNative`\n\nBut the Android plugin stubs the underlying MethodChannel calls (see `phone-manager-app-d48`).\n\n## Desired outcome\nPick ONE primary path and make the UI/logic consistent:\n- If we keep FlutterBlue-only for BAS/services/notify, remove native-path UI logic and any implied support.\n- If we want native-managed GATT, implement the plugin methods and keep the Dart path minimal.\n\n## Guardrails\n- Avoid scan/connect churn that fights `DeviceManager` scan cycles.\n- Prefer delegating BLE operations to a manager/service rather than the widget.\n\n## Verification\n- Connect/disconnect reliably.\n- Battery read works (via chosen path).\n- No dead buttons / misleading status text.\n\n## Related regression\nAndroid connect failures in Device Details are tracked separately (shelved): `phone-manager-app-bld`.\n","acceptance_criteria":"DeviceDetailsScreen uses one reliable path; no interaction with stubbed native APIs","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:05.994904324-07:00","updated_at":"2025-12-24T16:38:38.343937805-07:00","dependencies":[{"issue_id":"phone-manager-app-f43","depends_on_id":"phone-manager-app-415","type":"blocks","created_at":"2025-12-21T17:44:28.174365349-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-f43","depends_on_id":"phone-manager-app-d48","type":"blocks","created_at":"2025-12-21T17:44:28.216979876-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-jvb","title":"Update docs after removing sdks/","description":"## Goal\nUpdate documentation to reflect that the vendored `sdks/` directory was removed and the project uses published dependencies instead.\n\n## What changed\n- `sdks/` (vendored Nordic sources) is no longer part of the repo.\n- Android pulls the Nordic Mesh library from Maven via Gradle dependencies (see `android/app/build.gradle.kts`).\n\n## What to update\n- Setup/build docs that implied `sdks/` is required.\n- References to local SDK checkouts or paths.\n- Ensure contributors know where the Nordic mesh dependency comes from and how to update it.\n\n## Decisions\n- Document Android Nordic Mesh dependency as a Maven/Gradle dependency (no local `sdks/`).\n- Adjust verification grep commands to exclude `.beads/` because it contains a Unix socket (`bd.sock`) that causes `grep -R` to exit non-zero.\n\n## How to verify\nSearch for stale references:\n- `grep -R \"sdks/\" -n . --exclude-dir=.beads --exclude-dir=.venv`\n- `grep -R \"Android-nRF-Mesh-Library\" -n . --exclude-dir=.beads --exclude-dir=.venv` (should remain only as an informational link/reference, not as a required local folder)\n\n## Suggested files to review\n- `README.md`\n- `SETUP.md`\n- `TECHNICAL.md`\n- `ARCHITECTURE_REDESIGN.md` (if it mentions vendored SDKs)\n","acceptance_criteria":"Docs mention sdks removal; setup reflects Maven deps; no stale references","status":"closed","issue_type":"task","created_at":"2025-12-21T17:42:19.185065889-07:00","updated_at":"2025-12-21T20:48:25.765514268-07:00","closed_at":"2025-12-21T20:48:25.765514268-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-njl","title":"Define MethodChannel API contract","description":"## Goal\nDefine the **authoritative MethodChannel contract** between Dart and Android so platform work is implementable, testable, and doesn’t drift.\n\n## Channel\n- Name: `mesh_plugin`\n\n## Current Dart entrypoint(s)\n- `lib/managers/real_mesh_client.dart` (`PlatformMeshClient`)\n- `lib/screens/device_details_screen.dart` (native connection fallback path)\n\n## Current Android entrypoint\n- `android/app/src/main/kotlin/com/nordicmesh/nordic_mesh_manager/MeshPlugin.kt`\n\n## Output (this issue)\n- Contract doc: `METHOD_CHANNEL_CONTRACT.md`\n\n## Key decisions captured in the contract\n- MAC canonical form in payloads: `aa:bb:cc:dd:ee:ff` (lowercase + colons). Inputs may be any common form; payloads should be canonical.\n- `null` vs empty collection semantics are explicit per method.\n- Dart-invoked but Android-not-implemented methods are explicitly called out (they currently throw `MissingPluginException` on Dart): `configureProxyFilter`, `sendUnicastGet`.\n- Dart expects several events that Android does not emit today; the contract documents this drift and treats `onMeshPduCreated` as currently unused on Android (since PDUs are transmitted natively).\n\n## Verification\n- `flutter analyze --fatal-infos --fatal-warnings`\n- `flutter test`\n\n## Out of scope\nImplementing the contract. That work is tracked in dependent issues.\n","acceptance_criteria":"Contract document exists; method/event shapes are explicit; follow-up issues can implement without guessing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:50.234289206-07:00","updated_at":"2025-12-24T15:51:49.623292555-07:00","closed_at":"2025-12-24T15:51:49.623292555-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-sdj","title":"Add mesh-client capability tests","description":"## Goal\nAdd tests that validate mesh client capability gating and fallback behavior (especially around the platform plugin boundary).\n\n## Why it matters\nA lot of dead-by-mismatch risk comes from Dart assuming the plugin supports methods/events that it doesn’t. Tests should lock in expected behavior and prevent regressions.\n\n## Suggested test focus\n- `PlatformMeshClient` behavior when:\n  - plugin is unavailable (`isAvailable` false / MissingPluginException) -\u003e uses fallback\n  - plugin returns null/false for certain methods -\u003e uses fallback or cached behavior\n- Capability/contract enforcement once `phone-manager-app-njl` is defined.\n\n## Candidate files\n- `lib/managers/mesh_client.dart`\n- `lib/managers/real_mesh_client.dart`\n\n## Notes\nThis is blocked on:\n- `phone-manager-app-njl` (contract), and\n- `phone-manager-app-415` (callback alignment), so tests can match the final surface area.\n\n## Verification\n- `flutter test` passes.\n- Tests fail if someone reintroduces “assume callback exists” behavior.\n","acceptance_criteria":"Capability tests cover plugin availability + fallback behavior","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T17:41:59.489267097-07:00","updated_at":"2025-12-21T20:37:57.428180603-07:00","dependencies":[{"issue_id":"phone-manager-app-sdj","depends_on_id":"phone-manager-app-njl","type":"blocks","created_at":"2025-12-21T17:44:28.259802735-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-sdj","depends_on_id":"phone-manager-app-415","type":"blocks","created_at":"2025-12-21T17:44:28.324179122-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-sw7","title":"Fix prefer_is_not_operator finding","description":"## Goal\nFix `prefer_is_not_operator` findings.\n\n## Typical fix\nReplace:\n- `!(x is T)`\nwith:\n- `x is! T`\n\n## Known location\nPreviously observed in `lib/managers/device_manager.dart` around ~1361.\n\n## Verification\nRun the chosen analyze command (see `phone-manager-app-f14`) and confirm this lint is gone.\n","acceptance_criteria":"No prefer_is_not_operator findings under chosen analyze policy","notes":"Verification (2025-12-24): ran 'flutter analyze --fatal-infos --fatal-warnings' and there are currently 0 prefer_is_not_operator findings. No code changes needed for this issue.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:38:18.452354468-07:00","updated_at":"2025-12-24T14:54:48.857526779-07:00","closed_at":"2025-12-24T14:54:48.857526779-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-sw7","depends_on_id":"phone-manager-app-f14","type":"blocks","created_at":"2025-12-21T17:44:27.793309697-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-v1v","title":"Externalize mesh credentials","description":"## Goal\nRemove hard-coded mesh credentials from code and provide a safe, documented configuration mechanism.\n\n## Current state\n`lib/managers/device_manager.dart` seeds hard-coded keys at startup (example netKey/appKey in the constructor area).\n\n## Why it matters\n- Hard-coded credentials are easy to leak and hard to rotate.\n- Makes multi-network testing painful.\n\n## Options (pick one)\nA) **Build-time injection** using `--dart-define` (simple, works for dev/CI).\nB) **Runtime config** via an assets file (dev-only) or a settings screen (prod).\nC) **Secure storage** (store after user input) for production.\n\n## Scope\n- Provide a single “source of truth” for credentials.\n- Ensure `DeviceManager.setMeshCredentials()` remains the integration point.\n- Update docs on how to set creds for mesh testing.\n\n## Verification\n- App starts with a clear status when creds are missing.\n- Mesh initialization uses provided creds when present.\n- No secrets committed in repo.\n","acceptance_criteria":"Mesh creds are configurable (not hard-coded) with a safe default for dev","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:41:30.497250513-07:00","updated_at":"2025-12-21T20:37:17.38036791-07:00"}
{"id":"phone-manager-app-wmm","title":"Centralize MAC normalization","description":"## Goal\nCentralize MAC normalization so comparisons, map keys, and native/plugin payloads are consistent across the app without changing trigger/discovery behavior.\n\n## What shipped\n- Added centralized MAC utilities in lib/utils/mac_address.dart:\n  - normalizeMac, macCacheKey, macNoSeparators, normalizeMacListPreserveNull, macEquals\n- Refactored call sites to use helpers for identity comparisons and cache keys:\n  - lib/managers/device_manager.dart\n  - lib/managers/services/ble_scanning_service.dart\n  - lib/managers/gatt_mesh_client.dart\n  - lib/managers/mesh_client.dart (mock)\n  - lib/screens/device_details_screen.dart\n- Preserved mac list semantics across the platform boundary (macs == null vs macs.isEmpty) so trigger behavior stays consistent.\n\n## Follow-up regressions addressed during verification\n- Scan regression (2/3 devices): widened mesh advert heuristic to accept Nordic Semiconductor company ID 0x0059 in manufacturer data as a strong mesh signal.\n- Trigger regression (intermittent): Android MeshPlugin proxy connection attempts could overlap (startup ensureProxyConnection vs trigger), racing and overwriting bleManager. Added serialization of proxy connections so trigger waits instead of racing.\n- UI state not updating to OFF: made Dart status callback parsing tolerant to bool/int/string payloads.\n\n## Verification\n- flutter test: pass\n- flutter analyze: pass\n- android: ./gradlew :app:compileDebugKotlin: pass\n- Manual on device:\n  - Scan shows all 3 devices\n  - Trigger group succeeds\n  - UI state updates (including OFF)","acceptance_criteria":"- All MAC comparisons and key derivations use centralized helpers\\n- Plugin payload construction preserves macs semantics (null vs empty)\\n- flutter test passes\\n- Manual trigger verification on device passes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:55.58304668-07:00","updated_at":"2025-12-21T22:49:23.267091442-07:00","closed_at":"2025-12-21T22:49:23.267091442-07:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"phone-manager-app-wmm","author":"banders","text":"Reopening to clarify scope/guardrails: MAC canonicalization must preserve trigger semantics (empty list vs broadcast) and cover plugin payload/keying boundaries.","created_at":"2025-12-22T05:02:30Z"}]}
{"id":"phone-manager-app-xte","title":"Align mesh interfaces with ARCHITECTURE_REDESIGN","description":"## Goal\nAlign the public-facing mesh interfaces (Dart `MeshClient` + `PlatformMeshClient` + MethodChannel usage) with the intended architecture in `ARCHITECTURE_REDESIGN.md`, removing/isolating legacy artifacts so future work can proceed without drift.\n\n## Why now\nWe now have an authoritative contract doc (`METHOD_CHANNEL_CONTRACT.md`). This is a good moment to clean up the interface surface area before implementing more platform features.\n\n## Scope\n- Audit **Dart calls → Android plugin methods** and ensure one of:\n  - The method exists on Android and is documented, OR\n  - The Dart call path is removed/guarded behind availability, OR\n  - The method is moved behind an internal interface explicitly marked “Android-only / stubbed”.\n- Normalize naming/argument conventions to match the redesign (e.g., `mac` vs `address`, group id/address naming).\n- Remove or encapsulate known artifacts that don’t align with the redesign state machine model (scan/connect/messaging/disconnect).\n- Update `METHOD_CHANNEL_CONTRACT.md` if any names/shapes change.\n\n## Known artifacts to address (initial list)\n- Dart invokes methods not implemented by Android today (currently throw `MissingPluginException`):\n  - `configureProxyFilter`\n  - `sendUnicastGet`\n- Dart expects events not emitted by Android today:\n  - `onMeshPduCreated`, `onCharacteristicNotification`, `onBatteryLevel`, `onSubscriptionReady`\n- Android exposes methods unused by Dart:\n  - `connectToDevice`, `disconnectFromDevice` (verify whether they should be deleted or adopted)\n- `readBatteryLevel` in Android returns before async GATT read settles (document or redesign API).\n\n## Non-goals\n- Implementing missing platform functionality (tracked elsewhere)\n- Rewriting DeviceManager into the full state machine (tracked elsewhere)\n\n## Where\n- `lib/managers/mesh_client.dart`\n- `lib/managers/real_mesh_client.dart`\n- `android/app/src/main/kotlin/com/nordicmesh/nordic_mesh_manager/MeshPlugin.kt`\n- `METHOD_CHANNEL_CONTRACT.md`\n- `ARCHITECTURE_REDESIGN.md`\n\n## Related / likely dependencies\n- phone-manager-app-415: Align Dart/native callback events\n- phone-manager-app-d48: Resolve stubbed native MethodChannel methods\n\n## Verification\n- `flutter analyze --fatal-infos --fatal-warnings`\n- `flutter test`\n","acceptance_criteria":"Dart↔Android surface area is consistent; deprecated artifacts removed or isolated; analyzer/tests pass","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T15:52:35.087661149-07:00","updated_at":"2025-12-24T15:52:35.087661149-07:00","dependencies":[{"issue_id":"phone-manager-app-xte","depends_on_id":"phone-manager-app-415","type":"blocks","created_at":"2025-12-24T15:52:37.712595262-07:00","created_by":"daemon"},{"issue_id":"phone-manager-app-xte","depends_on_id":"phone-manager-app-d48","type":"blocks","created_at":"2025-12-24T15:52:37.771357353-07:00","created_by":"daemon"}]}
{"id":"phone-manager-app-xy3","title":"Regression: Trigger button no-ops after MAC normalization","description":"Fixed: trigger could send empty mac list; now targets assigned+confirmed MACs and passes null when none. Also normalizes triggerDevices input MACs.","acceptance_criteria":"- Pressing Trigger group / Trigger selected triggers devices again\\n- flutter test passes","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T21:52:44.161595661-07:00","updated_at":"2025-12-21T21:52:54.715046005-07:00","closed_at":"2025-12-21T21:52:54.715046005-07:00","close_reason":"Closed"}
{"id":"phone-manager-app-yzy","title":"Remove unnecessary library directive in mac_address.dart","description":"## Goal\nFix the `unnecessary_library_name` lint by removing the redundant `library` directive in `lib/utils/mac_address.dart`.\n\n## Background / Context\nRepo-wide analysis gate (see `phone-manager-app-f14`) treats infos/warnings as fatal.\n\n## Where\n- `lib/utils/mac_address.dart` (currently has `library mac_address;`)\n- Lint reported at: `lib/utils/mac_address.dart:10:9`\n\n## Scope\n- Remove the `library mac_address;` directive.\n- Preserve all public function APIs and behavior.\n\n## Non-goals\n- Refactors unrelated formatting or logic.\n- Addressing other lints (e.g. `use_rethrow_when_possible`) unless they are in the same file and required for this fix.\n\n## Repro\n- Run: `flutter analyze --fatal-infos --fatal-warnings`\n- Observe: `unnecessary_library_name` at `lib/utils/mac_address.dart:10:9`\n\n## Implementation notes\n- Dart library names are optional; delete the `library ...;` line and any now-superfluous blank line it leaves behind.\n\n## Verification\n- Run: `flutter analyze --fatal-infos --fatal-warnings`\n- Confirm: no `unnecessary_library_name` findings remain.\n","acceptance_criteria":"No unnecessary_library_name findings under 'flutter analyze --fatal-infos --fatal-warnings'.","notes":"2025-12-24 follow-up: converted the file header '///' block to regular '//' comments (no library directive anymore) to avoid dangling_library_doc_comments. Verified: flutter analyze --fatal-infos --fatal-warnings =\u003e No issues found.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T14:56:47.614971801-07:00","updated_at":"2025-12-24T15:31:01.067553414-07:00","closed_at":"2025-12-24T15:31:01.067553414-07:00","close_reason":"Closed","dependencies":[{"issue_id":"phone-manager-app-yzy","depends_on_id":"phone-manager-app-5b6","type":"blocks","created_at":"2025-12-24T14:56:47.633244006-07:00","created_by":"daemon"}]}
